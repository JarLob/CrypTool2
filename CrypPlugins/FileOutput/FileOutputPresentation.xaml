<UserControl x:Class="FileOutput.FileOutputPresentation"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
    xmlns:wi="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
    xmlns:wfuc="clr-namespace:FileOutput.WindowsFormsUserControl"
    xmlns:fi="clr-namespace:FileOutput"
    Height="302" Width="795">

  <UserControl.CommandBindings>
    <CommandBinding Command="Open" PreviewExecuted="PreviewOpen_Executed" CanExecute="Open_CanExecute" />
    <CommandBinding Command="Save" PreviewExecuted="PreviewSave_Executed" CanExecute="Save_CanExecute" />
    <CommandBinding Command="New" PreviewExecuted="PreviewNew_Executed" CanExecute="New_CanExecute" />
    
    <CommandBinding Command="fi:Commands.CutCommand" PreviewExecuted="PreviewCut_Executed" CanExecute="Cut_CanExecute" />
    <CommandBinding Command="fi:Commands.CopyCommand" PreviewExecuted="PreviewCopy_Executed" CanExecute="Copy_CanExecute" />
    <CommandBinding Command="Paste" Executed="PreviewPaste_Executed" CanExecute="Paste_CanExecute" />
    <CommandBinding Command="Find" PreviewExecuted="PreviewFind_Executed" CanExecute="Find_CanExecute" />
    <CommandBinding Command="fi:Commands.FindNextCommand" PreviewExecuted="PreviewFindNext_Executed" CanExecute="FindNext_CanExecute" />
    <CommandBinding Command="fi:Commands.AbortCommand" PreviewExecuted="PreviewAbort_Executed" CanExecute="Abort_CanExecute" />
  </UserControl.CommandBindings>

  <Grid Background="Transparent">
    <Grid.RowDefinitions>
      <RowDefinition Height="50" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <StackPanel Name="stackPanel1" Grid.Row="0" MinHeight="55" Background="Transparent">
      <Menu Height="22" Name="menu">
        <MenuItem Header="File">          
          <MenuItem Name="menuItemClose" Header="Close" Click="Close_Click" />
        </MenuItem>
        <MenuItem Header="Edit">
          <MenuItem Header="Cut" Command="fi:Commands.CutCommand" />
          <MenuItem Header="Copy" Command="fi:Commands.CopyCommand" />
          <MenuItem Header="Paste" Command="Paste" />
          <Separator />
          <MenuItem Header="Find" Command="Find"/>
          <MenuItem Header="Find next" InputGestureText="F3" Command="fi:Commands.FindNextCommand" />          
        </MenuItem>        
        <MenuItem Header="Help">
          <MenuItem Header="About" Click="About_Click"/>
        </MenuItem>
      </Menu>

      <ToolBarTray Background="Transparent" Margin="0">
        <ToolBar>          
          <Button Name="buttonSave" Command="Save">Save</Button>
          <Separator />
          <Button Name="buttonCut" Command="fi:Commands.CutCommand">Cut</Button>
          <Button Name="buttonCopy" Command="fi:Commands.CopyCommand">Copy</Button>
          <Button Name="buttonPaste" Command="Paste">Paste</Button>
          <!--<Button Name="buttonClose" Click="Close_Click">Close</Button>-->
        </ToolBar>
        <ToolBar>
          <Label>Find:</Label>
          <TextBox Name="textBoxSearch" Width="100" Background="WhiteSmoke" BorderThickness="1" BorderBrush="Black" AllowDrop="True"></TextBox>
          <Button Name="buttonFind" Command="Find">Search</Button>
          <Button Name="buttonAbort" Command="fi:Commands.AbortCommand">Cancel</Button>
        </ToolBar>
        <ToolBar>
          <ProgressBar Name="progressBar" ToolTip="Search Progress" MinWidth="100"/>
        </ToolBar>
      </ToolBarTray>
      <StackPanel Orientation="Horizontal" Background="LightGray">
        <TextBlock Text="Target filename: " VerticalAlignment="Center" Margin="0"/>
        <TextBlock Name="targetFile" VerticalAlignment="Center" Width="Auto" />                
      </StackPanel>
    </StackPanel>
    
    <DockPanel LastChildFill="True" Background="AliceBlue" Grid.Row="1">
      <wi:WindowsFormsHost Name="windowsFormsHost" Visibility="Collapsed">
        <wfuc:HexBoxContainer x:Name="uscHexBox" />
      </wi:WindowsFormsHost>
    </DockPanel>

    <TextBox Grid.Row="1" Name="textBoxNoFileMessage" IsReadOnly="True" TextWrapping="Wrap">
      If you want to copy the input stream to a specific file, please select a target. 
      If you do not select a target the input stream will just be displayed. (To open a file please use FileInput Plugin.)
    </TextBox>
  </Grid>
</UserControl>
