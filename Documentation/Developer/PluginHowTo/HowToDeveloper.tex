\documentclass[11pt, a4paper, titlepage]{scrreprt}

\usepackage[latin1]{inputenc}
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{geometry}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{url}
\usepackage{wrapfig}
\usepackage{color}
\usepackage{colortbl}
\usepackage{eso-pic}
\usepackage{listings}

%\usepackage[automark]{scrpage2}
%\usepackage[absolute]{textpos}

\lstset{language=[Sharp]C, % Grundsprache ist C und Dialekt ist Sharp (C#)
captionpos=b, % Beschriftung ist unterhalb
frame=lines, % Oberhalb und unterhalb des Listings ist eine Linie
basicstyle=\ttfamily, % Schriftart
keywordstyle=\color{blue}, % Farbe f¸r die Keywords wie public, void, object u.s.w.
commentstyle=\color{green}, % Farbe der Kommentare
stringstyle=\color{red}, % Farbe der Zeichenketten
numbers=left, % Zeilennummern links vom Code
numberstyle=\tiny, % kleine Zeilennummern
numbersep=5pt,
tabsize=2,
breaklines=true, % Wordwrap a.k.a. Zeilenumbruch aktiviert
showstringspaces=false,
% emph legt Farben f¸r bestimmte Wˆrter manuell fest
emph={double,bool,int,unsigned,char,true,false,void},
emphstyle=\color{blue},
emph={Assert,Test},
emphstyle=\color{red},
emph={[2]\using,\#define,\#ifdef,\#endif}, emphstyle={[2]\color{blue}}
}

\geometry{a4paper, portrait, left=2cm, right=2cm, top=2cm, bottom=2cm, includefoot}

%\pagestyle{headings}
%\pagestyle{scrheadings}
\pagestyle{fancy} %eigener Seitenstil
\fancyhf{} %alle Kopf- und Fu√üzeilenfelder bereinigen
\fancyhead[L]{\leftmark} %Kopfzeile links
\fancyhead[C]{\AddToShipoutPicture*{\BackgroundHeaderPic}} %zentrierte Kopfzeile
%\fancyhead[R]{\rightmark} %Kopfzeile rechts --> Removed because it's overflowing on the leftmark if the text is too long

\fancyfoot[C]{\thepage\AddToShipoutPicture*{\BackgroundFooterPic}} %zentrierte Fu√üzeile
%\fancyfoot[EL,OR]{\thepage} %Seitennummer
%\fancyfoot[ER,OL]{\includegraphics[height=0.3cm]{figures/ct_logo}}

\renewcommand{\headrulewidth}{2pt} %obere Trennlinie
\renewcommand{\footrulewidth}{2pt} %untere Trennlinie

\newlength{\headbgwidth}
\setlength{\headbgwidth}{\headwidth}
%\addtolength{\headbgwidth}{0.3mm}
%\addtolength{\headwidth}{\marginparwidth}


\renewcommand{\headrule}{{\color{orange}\hrule width\headwidth height\headrulewidth \vskip-\headrulewidth}}
\renewcommand{\footrule}{{\color{orange}\vskip-\footruleskip\vskip-\footrulewidth\hrule width\headwidth height\footrulewidth\vskip\footruleskip}}


\makeatletter
\newcommand\BackgroundHeaderPic{
%\AddToShipoutPicture{%
    \setlength{\@tempdimb}{1.87cm}%
    \setlength{\@tempdimc}{28.4cm}%
    \setlength{\unitlength}{1pt}%
    \put(\strip@pt\@tempdimb,\strip@pt\@tempdimc){
        \includegraphics[width=\headbgwidth, height=\headheight]{figures/ct_page_header}%
    }
}

\newcommand\BackgroundFooterPic{
%\AddToShipoutPicture{%
    \setlength{\@tempdimb}{1.87cm}%
    \setlength{\@tempdimc}{1.8cm}%
    \setlength{\unitlength}{1pt}%
    \put(\strip@pt\@tempdimb,\strip@pt\@tempdimc){
        \includegraphics[width=\headbgwidth, height=0.7cm]{figures/ct_page_footer_pure}%
    }
}

\newcommand\WaterMarkPic{%
    \setlength{\@tempdimb}{1.85cm}%
    \setlength{\@tempdimc}{2.7cm}%
    \setlength{\unitlength}{1pt}%
    \put(\strip@pt\@tempdimb,\strip@pt\@tempdimc){
            \includegraphics[width=0.6\textwidth]{figures/ct_logo_watermark}%
    }
}
\makeatother

% finetune the gaps between figure and text in the subfigure environment (basically close the gap as much as possible)
%\renewcommand{\subfigtopskip}{0pt}
%\renewcommand{\subfigbottomskip}{0pt}

% some color definitions for the pdf statements below
\definecolor{mygrey}{rgb}{0.45,0.45,0.45}
\definecolor{mydarkgrey}{rgb}{0.2,0.2,0.2}
\definecolor{red}{rgb}{1.0,0.33,0.33}
\definecolor{orange}{rgb}{1.00,0.73,0.33}
\definecolor{yellow}{rgb}{0.95,0.92,0.}
\definecolor{lightgreen}{rgb}{0.3,0.95,0.46}
\definecolor{titleblue}{rgb}{0.03,0.10,0.46}


\input{frontpage}


\title{CrypTool 2.0}
\subtitle{\Huge Developer Manual\\\normalsize How to build your own plugins for CT2?}
\author{S.\ Przybylski, A.\ Wacker, M.\ Wander and F.\ Enkler}
\email{\{przybylski$|$wacker$|$wander$|$enkler\}@cryptool.org}
\version{0.1}
\date{\today}

% Metadata and configuration of the pdf output:
% Do not forget to enter the correct title, author, subject und keywords

% For screen viewing it is nice to have references marked in a slightly different
% color than the rest of the text. Since they will be hyperlinks to the
% referenced objects.
\usepackage[pdftex,
             pdftitle={\@title},
             colorlinks,
             linkcolor={mydarkgrey},
             citecolor={mygrey},
             urlcolor={blue},
             plainpages={false},
             bookmarksnumbered={true},
             bookmarksopenlevel={3},
             pdfauthor={\@author},
             pdfsubject={\@subtitle},
             pdfkeywords={CrypTool,Cryptography,eLearning,Cryptanalysis},
             pdfstartview={Fit}]{hyperref}

%\usepackage{pdfsync}

% To avoid nasty mistakes like having comments directly in the textflow
% the following \todo macro was defined. With that you can enter
% \todo{What I still have to do here}
% inside of your text and a marker will appear at the page's margin with the
% text "What I still have to do here".
% The first line activates this feature. If you comment it out and uncomment
% the second line below there will be no error messages and no todos will be shown
% anymore. So - even if you have forgotten to delete one of them - they will not appear
% in the final printout.
\newcommand{\todo}[1]{\marginpar{\textcolor{red}{ToDo:} #1}}



%\AtBeginDocument{\markboth{\@author}{\@title}} 
\begin{document}
	\maketitle
	
	\begin{abstract}
    \textbf{''Abstract.} CrypTool 2 is the modern successor of the well known e-learning platform for cryptography and cryptanalysis \htmladdnormallink{CrypTool 1}{http://www.cryptool.org}, which is used world-wide for educational purposes at school and universities and in companies and agencies.\\\\Since the first launch of CrypTool 1 in 1999 the art of software development has changed dramatically. So the CrypTool 2 team started in 2008 to develop a completely new e-learning application, embracing the newest trends in both didactics and software architecture to delight the end-user with an entirely new experience.\\\\CT 2 is build using
\renewcommand{\labelitemi}{-}
\begin{itemize}
	\item .NET (modern software framework with solutions to common programming problems form Microsoft), 
	\item C\# (modern object-oriented programming language, comparable to Java) and 
 \item WPF (modern purely vector-based graphical subsystem for rendering user interfaces in Windows-based applications) plus 
 \item VisualStudio2008 (development environment) and 
	\item Subversion (source code and documentation version management system). 
\end{itemize}\\
This document is intended for plugin developers, who want to contribute new visual or mathematical functionality to CT2.\\Currently (January 2010) the code exists of about 7000 lines of C\# code in the Core system and about 240,641 lines of C\# code in the 115 plugins.\\\\For further news and more screenshots please see the developer page \htmladdnormallink{http://www.cryptool2.vs.uni-due.de}{http://www.cryptool2.vs.uni-due.de}.''
    \end{abstract}

	\tableofcontents

    
    \AddToShipoutPicture{\WaterMarkPic}  

	\include{part1}
	\include{part2}

\end{document}
